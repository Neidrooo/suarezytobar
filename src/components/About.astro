---
// About section
import { Image } from 'astro:assets';

// Using the same Unsplash image as background
const backgroundImageUrl = 'https://images.unsplash.com/photo-1558904541-efa843a96f01?w=1600&q=80';
---

<section id="nosotros" class="about">
	<div class="about-background">
		<img
			src={backgroundImageUrl}
			alt=""
			class="background-img"
			loading="lazy"
			decoding="async"
		/>
	</div>
	<div class="container">
		<!-- Header Section -->
		<div class="about-header">
			<h2>Transformando Espacios Verdes desde 2005</h2>
			<p class="subtitle">Más de 20 años de experiencia profesional en mantenimiento de áreas verdes y aseo industrial en Santiago, Chile</p>
		</div>

		<!-- Stats Grid -->
		<div class="stats-grid" id="stats-grid">
			<div class="stat-card">
				<div class="stat-icon">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M12 2v20M2 12h20"></path>
						<circle cx="12" cy="12" r="10"></circle>
					</svg>
				</div>
				<div class="stat-number" data-target="20" data-suffix="+">0+</div>
				<div class="stat-label">Años de Experiencia</div>
			</div>

			<div class="stat-card">
				<div class="stat-icon">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
						<circle cx="9" cy="7" r="4"></circle>
						<path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"></path>
					</svg>
				</div>
				<div class="stat-number" data-target="100" data-suffix="%">0%</div>
				<div class="stat-label">Personal Capacitado</div>
			</div>

			<div class="stat-card">
				<div class="stat-icon">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
					</svg>
				</div>
				<div class="stat-number" data-target="0" data-suffix="">0</div>
				<div class="stat-label">Política de Accidentes</div>
			</div>

			<div class="stat-card">
				<div class="stat-icon">
					<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
						<polyline points="22 4 12 14.01 9 11.01"></polyline>
					</svg>
				</div>
				<div class="stat-number" data-target="500" data-suffix="+">0+</div>
				<div class="stat-label">Proyectos Completados</div>
			</div>
		</div>

		<!-- Main Content Grid -->
		<div class="content-grid">
			<div class="text-section">
				<h3>Quiénes Somos</h3>
				<p>
					<strong>Suarez y Tobar Limitada</strong> ofrece servicios de mantenimiento de jardines, 
					paisajismo y aseo industrial en Santiago, Chile. Operamos desde 2005 con equipos 
					certificados y maquinaria especializada.
				</p>
				<p>
					Trabajamos con empresas, condominios y espacios públicos. Nuestro equipo cuenta con 
					certificaciones en seguridad laboral y manejo de equipos especializados.
				</p>

				<!-- Values List -->
				<div class="values-list">
					<div class="value-item">
						<div class="value-icon">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M12 2L2 7l10 5 10-5-10-5z"></path>
								<path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path>
							</svg>
						</div>
						<div class="value-content">
							<h4>Equipos Especializados</h4>
							<p>Maquinaria y herramientas para poda, corte de césped, riego y limpieza industrial</p>
						</div>
					</div>

					<div class="value-item">
						<div class="value-icon">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>
							</svg>
						</div>
						<div class="value-content">
							<h4>Mantenimiento Programado</h4>
							<p>Contratos mensuales y servicios puntuales según necesidades del cliente</p>
						</div>
					</div>

					<div class="value-item">
						<div class="value-icon">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
								<path d="m9 12 2 2 4-4"></path>
							</svg>
						</div>
						<div class="value-content">
							<h4>Cumplimiento Normativo</h4>
							<p>Personal con certificaciones de seguridad y seguros laborales al día</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<style>
	.about {
		padding: 1.5rem 0;
		position: relative;
		overflow: hidden;
	}

	.about-background {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 0;
		overflow: hidden;
	}

	.background-img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		object-position: center;
	}

	.about::after {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: 
			linear-gradient(135deg, rgba(255, 255, 255, 0.75) 0%, rgba(249, 250, 251, 0.70) 100%),
			radial-gradient(circle at 30% 50%, rgba(139, 197, 63, 0.08) 0%, transparent 50%),
			radial-gradient(circle at 70% 50%, rgba(122, 184, 46, 0.06) 0%, transparent 50%);
		pointer-events: none;
		z-index: 1;
	}

	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 1.5rem;
		width: 100%;
		position: relative;
		z-index: 2;
	}

	/* Header Section */
	.about-header {
		text-align: center;
		margin-bottom: 1.25rem;
	}

	.badge {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.5rem 1.25rem;
		border-radius: 50px;
		background: linear-gradient(135deg, rgba(139, 197, 63, 0.15), rgba(139, 197, 63, 0.08));
		border: 1.5px solid rgba(139, 197, 63, 0.3);
		margin-bottom: 1.5rem;
		backdrop-filter: blur(10px);
	}

	.badge svg {
		color: #8bc53f;
		width: 16px;
		height: 16px;
	}

	.badge span {
		font-size: 0.875rem;
		font-weight: 600;
		color: #7ab82e;
		text-transform: uppercase;
		letter-spacing: 0.08em;
	}

	h2 {
		font-size: 1.5rem;
		font-weight: 800;
		color: #111827;
		margin-bottom: 1rem;
		line-height: 1.2;
	}

	.subtitle {
		font-size: 0.9375rem;
		color: #6b7280;
		max-width: 700px;
		margin: 0 auto;
		line-height: 1.5;
	}

	/* Stats Grid */
	.stats-grid {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 0.75rem;
		margin-bottom: 1.25rem;
	}

	.stat-card {
		background: rgba(255, 255, 255, 0.92);
		backdrop-filter: blur(16px);
		-webkit-backdrop-filter: blur(16px);
		padding: 1.25rem 1rem;
		border-radius: 1.25rem;
		border: 1.5px solid rgba(139, 197, 63, 0.2);
		text-align: center;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		position: relative;
		overflow: hidden;
		box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08), 0 4px 8px rgba(139, 197, 63, 0.04);
	}

	.stat-card::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 4px;
		background: linear-gradient(90deg, #8bc53f, #7ab82e);
		transform: scaleX(0);
		transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.stat-card:hover {
		transform: translateY(-6px);
		background: rgba(255, 255, 255, 0.98);
		box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12), 0 10px 20px rgba(139, 197, 63, 0.1);
		border-color: rgba(139, 197, 63, 0.4);
	}

	.stat-card:hover::before {
		transform: scaleX(1);
	}

	.stat-icon {
		width: 48px;
		height: 48px;
		margin: 0 auto 0.75rem;
		background: linear-gradient(135deg, rgba(139, 197, 63, 0.12), rgba(139, 197, 63, 0.06));
		border-radius: 1rem;
		display: flex;
		align-items: center;
		justify-content: center;
		color: #8bc53f;
		transition: all 0.3s ease;
	}

	.stat-icon svg {
		width: 24px;
		height: 24px;
	}

	.stat-card:hover .stat-icon {
		transform: scale(1.05);
		background: linear-gradient(135deg, rgba(139, 197, 63, 0.2), rgba(139, 197, 63, 0.1));
	}

	.stat-number {
		font-size: 1.5rem;
		font-weight: 800;
		color: #111827;
		margin-bottom: 0.375rem;
		line-height: 1;
	}

	.stat-label {
		font-size: 0.75rem;
		color: #6b7280;
		font-weight: 500;
		line-height: 1.3;
	}

	/* Content Grid */
	.content-grid {
		display: grid;
		gap: 2.5rem;
		align-items: center;
		max-width: 900px;
		margin: 0 auto;
	}

	/* Text Section */
	.text-section {
		padding: 1.5rem;
		background: rgba(255, 255, 255, 0.95);
		backdrop-filter: blur(20px);
		-webkit-backdrop-filter: blur(20px);
		border-radius: 1.5rem;
		border: 1.5px solid rgba(139, 197, 63, 0.15);
		box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08), 0 6px 16px rgba(139, 197, 63, 0.06);
	}

	h3 {
		font-size: 1.25rem;
		font-weight: 700;
		color: #111827;
		margin-bottom: 1rem;
		line-height: 1.3;
	}

	.text-section p {
		font-size: 0.9375rem;
		color: #4b5563;
		line-height: 1.6;
		margin-bottom: 0.875rem;
	}

	.text-section strong {
		color: #111827;
		font-weight: 600;
	}

	/* Values List */
	.values-list {
		margin-top: 1.25rem;
		display: flex;
		flex-direction: column;
		gap: 0.875rem;
	}

	.value-item {
		display: flex;
		gap: 0.875rem;
		padding: 1rem;
		background: rgba(255, 255, 255, 0.85);
		backdrop-filter: blur(12px);
		-webkit-backdrop-filter: blur(12px);
		border-radius: 1rem;
		border: 1.5px solid rgba(139, 197, 63, 0.15);
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
	}

	.value-item:hover {
		background: rgba(255, 255, 255, 0.95);
		border-color: rgba(139, 197, 63, 0.35);
		box-shadow: 0 8px 20px rgba(139, 197, 63, 0.15), 0 4px 10px rgba(0, 0, 0, 0.08);
		transform: translateX(6px);
	}

	.value-icon {
		width: 40px;
		height: 40px;
		flex-shrink: 0;
		background: linear-gradient(135deg, rgba(139, 197, 63, 0.15), rgba(139, 197, 63, 0.08));
		border-radius: 0.875rem;
		display: flex;
		align-items: center;
		justify-content: center;
		color: #8bc53f;
		transition: all 0.3s ease;
	}

	.value-icon svg {
		width: 20px;
		height: 20px;
	}

	.value-item:hover .value-icon {
		transform: scale(1.05);
		background: linear-gradient(135deg, rgba(139, 197, 63, 0.25), rgba(139, 197, 63, 0.15));
	}

	.value-content h4 {
		font-size: 0.9375rem;
		font-weight: 700;
		color: #111827;
		margin: 0 0 0.25rem 0;
	}

	.value-content p {
		font-size: 0.8125rem;
		color: #6b7280;
		margin: 0;
		line-height: 1.4;
	}

	/* Responsive */
	@media (min-width: 640px) {
		.stats-grid {
			grid-template-columns: repeat(4, 1fr);
			gap: 1rem;
		}

		.stat-card {
			padding: 1.5rem 1.25rem;
		}

		.stat-icon {
			width: 52px;
			height: 52px;
		}

		.stat-icon svg {
			width: 26px;
			height: 26px;
		}

		.stat-number {
			font-size: 1.875rem;
		}

		.stat-label {
			font-size: 0.8125rem;
		}
	}

	@media (min-width: 768px) {
		.about {
			padding: 4rem 0;
		}

		.about-header {
			margin-bottom: 2.5rem;
		}

		h2 {
			font-size: 2.5rem;
		}

		.subtitle {
			font-size: 1.0625rem;
		}

		.stat-card {
			padding: 2rem 1.5rem;
		}

		.stat-icon {
			width: 56px;
			height: 56px;
		}

		.stat-icon svg {
			width: 28px;
			height: 28px;
		}

		.stat-number {
			font-size: 2.25rem;
		}

		.stat-label {
			font-size: 0.9375rem;
		}

		.stats-grid {
			margin-bottom: 3rem;
			gap: 1.25rem;
		}

		.text-section {
			padding: 2.5rem;
		}

		h3 {
			font-size: 1.5rem;
		}

		.text-section p {
			font-size: 1rem;
		}

		.value-item {
			padding: 1.25rem;
			gap: 1rem;
		}

		.value-icon {
			width: 44px;
			height: 44px;
		}

		.value-content h4 {
			font-size: 1.0625rem;
		}

		.value-content p {
			font-size: 0.9375rem;
		}
	}

	@media (min-width: 1024px) {
		.about {
			padding: 5rem 0;
		}

		.text-section {
			padding: 3rem;
		}

		h3 {
			font-size: 1.75rem;
		}

		.text-section p {
			font-size: 1.0625rem;
		}
	}
</style>

<script>
	// Counter animation when stats enter viewport
	function animateCounter(element: HTMLElement) {
		const target = parseInt(element.getAttribute('data-target') || '0');
		const suffix = element.getAttribute('data-suffix') || '';
		const duration = 1200; // 1.2 seconds - faster animation
		const increment = target / (duration / 16); // 60fps
		let current = 0;

		const updateCounter = () => {
			current += increment;
			if (current < target) {
				element.textContent = Math.floor(current) + suffix;
				requestAnimationFrame(updateCounter);
			} else {
				element.textContent = target + suffix;
			}
		};

		updateCounter();
	}

	// Intersection Observer to detect when stats enter viewport
	const statsGrid = document.getElementById('stats-grid');
	if (statsGrid) {
		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						const statNumbers = entry.target.querySelectorAll('.stat-number');
						statNumbers.forEach((stat) => animateCounter(stat as HTMLElement));
						observer.unobserve(entry.target); // Animate only once
					}
				});
			},
			{ threshold: 0.3 } // Trigger when 30% visible
		);

		observer.observe(statsGrid);
	}
</script>
