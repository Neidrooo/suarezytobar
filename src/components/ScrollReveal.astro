---
// Scroll Reveal Section - Efecto tipo GTA VI con parallax scroll
---

<section class="scroll-reveal" id="scroll-section">
	<div class="parallax-container">
		<!-- Imagen de fondo que se mueve con el scroll -->
		<div class="parallax-image" id="parallax-img">
			<img src="https://images.unsplash.com/photo-1558904541-efa843a96f01?w=1920&q=80" alt="Jardín profesional" />
		</div>
		
		<!-- Overlay con gradiente -->
		<div class="parallax-overlay"></div>
		
		<!-- Contenido sobre la imagen -->
		<div class="reveal-content">
			<div class="reveal-badge">
				<span>Suarez y Tobar</span>
			</div>
			<h2 class="reveal-title">
				Mantenimiento Profesional<br />
				<span class="highlight">Desde 2005</span>
			</h2>
			<p class="reveal-text">
				Jardines, paisajismo y aseo industrial en Santiago
			</p>
		</div>
	</div>
</section>

<style>
	.scroll-reveal {
		position: relative;
		height: 200vh; /* Altura doble para permitir el scroll */
		overflow: hidden;
	}

	.parallax-container {
		position: sticky;
		top: 0;
		height: 100vh;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;
	}

	/* Imagen que se mueve con parallax */
	.parallax-image {
		position: absolute;
		inset: 0;
		width: 100%;
		height: 100%;
		will-change: transform;
		transform: scale(1.2); /* Escala inicial para el efecto */
	}

	.parallax-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		object-position: center;
	}

	/* Overlay oscuro con gradiente */
	.parallax-overlay {
		position: absolute;
		inset: 0;
		background: linear-gradient(
			180deg,
			rgba(15, 23, 42, 0.7) 0%,
			rgba(15, 23, 42, 0.5) 50%,
			rgba(15, 23, 42, 0.8) 100%
		);
		z-index: 1;
	}

	/* Contenido sobre la imagen */
	.reveal-content {
		position: relative;
		z-index: 2;
		text-align: center;
		padding: 2rem;
		opacity: 0;
		transform: translateY(30px);
		transition: opacity 0.6s ease-out, transform 0.6s ease-out;
	}

	.reveal-content.visible {
		opacity: 1;
		transform: translateY(0);
	}

	.reveal-badge {
		display: inline-block;
		padding: 0.5rem 1.5rem;
		background: rgba(139, 197, 63, 0.15);
		border: 1.5px solid rgba(139, 197, 63, 0.4);
		border-radius: 50px;
		margin-bottom: 2rem;
		backdrop-filter: blur(10px);
	}

	.reveal-badge span {
		font-size: 0.875rem;
		font-weight: 600;
		color: #8bc53f;
		text-transform: uppercase;
		letter-spacing: 0.1em;
	}

	.reveal-title {
		font-size: 2.5rem;
		font-weight: 800;
		color: #ffffff;
		margin-bottom: 1.5rem;
		line-height: 1.2;
		text-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
	}

	.highlight {
		color: #8bc53f;
		display: block;
		margin-top: 0.5rem;
		text-shadow: 0 4px 20px rgba(139, 197, 63, 0.6);
	}

	.reveal-text {
		font-size: 1.125rem;
		color: #cbd5e1;
		max-width: 600px;
		margin: 0 auto;
		line-height: 1.6;
		text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
	}

	@media (min-width: 768px) {
		.reveal-title {
			font-size: 3.5rem;
		}

		.reveal-badge {
			padding: 0.625rem 2rem;
		}

		.reveal-badge span {
			font-size: 1rem;
		}

		.reveal-text {
			font-size: 1.25rem;
		}
	}

	@media (min-width: 1024px) {
		.reveal-title {
			font-size: 4.5rem;
		}
	}
</style>

<script>
	// Efecto parallax: la imagen se mueve con el scroll
	const parallaxImg = document.getElementById('parallax-img') as HTMLElement;
	const scrollSection = document.getElementById('scroll-section') as HTMLElement;
	const revealContent = document.querySelector('.reveal-content') as HTMLElement;

	function updateParallax() {
		if (!parallaxImg || !scrollSection) return;

		// Obtener la posición del scroll relativa a la sección
		const rect = scrollSection.getBoundingClientRect();
		const scrollProgress = -rect.top / (scrollSection.offsetHeight - window.innerHeight);
		
		// Limitar el progreso entre 0 y 1
		const clampedProgress = Math.max(0, Math.min(1, scrollProgress));
		
		// Aplicar transformación parallax a la imagen
		// La imagen se mueve y hace zoom mientras scrolleas
		const translateY = clampedProgress * 30; // Movimiento vertical
		const scale = 1.2 - (clampedProgress * 0.2); // Zoom out gradual
		
		parallaxImg.style.transform = `translateY(${translateY}%) scale(${scale})`;
		
		// Mostrar contenido cuando está visible
		if (clampedProgress > 0.1 && clampedProgress < 0.9) {
			revealContent?.classList.add('visible');
		}
	}

	// Escuchar el scroll
	window.addEventListener('scroll', updateParallax, { passive: true });
	
	// Ejecutar una vez al cargar
	updateParallax();
</script>
